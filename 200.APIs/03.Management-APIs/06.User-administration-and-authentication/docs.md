---
title: User administration and authentication
taxonomy:
    category: docs
api: true
template: docs
---

<a name="overview"></a>
## Overview
An API for user administration and user authentication handling. Intended for use by the web GUI.


### Version information
*Version* : 1


### URI scheme
*Host* : docker.mender.io  
*BasePath* : /api/management/v1/useradm  
*Schemes* : HTTPS




<a name="paths"></a>
## Paths
- [POST/auth/login](#auth-login-post)
- [POST/users/inital](#users-inital-post)


___
<a name="auth-login-post"></a>
### Log in to Mender
```
POST /auth/login
```


#### Description
Accepts user credentials via standard Basic Auth, and returns a
JWT token to be used for authentication in subsequent requests.

When the backend is started for the first time (no users yet),
the credentials can be omitted. A special-purpose token will
be issued, allowing only the first-time user creation.


#### Parameters

|Type|Name|Description|Schema|
|---|---|---|---|
|**Header**|**Authorization**  <br>*optional*|Standard Basic Auth header, based on user's credentials.<br>If it's omitted - a valid token will be issued only when there are<br>no users defined yet in the database.|string|


#### Responses

|HTTP Code|Description|Schema|
|---|---|---|
|**200**|Authentication successful - a new JWT is issued and returned.<br>The JWT is signed with the API's private key ('RS256' signing algorithm),<br>and contains the following standard claims:<br>* 'iss' - issuer<br>* 'exp' - expiry date<br>* 'sub' - unique, autogenerated user ID<br><br>A custom 'scp' (scopes) claim is added to distinguish between a regular token and a first-time user<br>creation token:<br>    * 'scp' : ['mender.*'] - regular token<br>    * 'scp' : ['mender.users.create.initial'] - first-time user creation token|No Content|
|**400**|Bad request, see error message for details.|[Error](#error)|
|**401**|Unauthorized.|[Error](#error)|
|**500**|Internal server error.|[Error](#error)|


#### Example HTTP response

##### Response 200
```json
{
  "application/jwt" : "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9. eyJleHAiOjE0NzYxMTkxMzYsImlzcyI6Ik1lbmRlciIsIn N1YiI6Ijg1NGIzMTA5LTQ4NjItNGEyNS1hMWZiLWYxMTE2 MWNlN2E4NCIsInNjcCI6WyJtZW5kZXIuKiJdfQ. X7Ief4PhPLlR6mA2wh3G3K0Z2tud0rK1QJesxu52NfICSe ARmlujczs-_1YZxMwI0s-HgpXHbXIjaSVK80BjxjAM1rqp RGvgqSqG-dU5KmglDpAaTr4VaJci3VFPlVUVTRpI7bfqNM nKZtjmOUAGwjvroDUwX1RwayEmms-efGI"
}
```


##### Response 400
```json
{
  "error" : "missing Authorization header"
}
```


##### Response 401
```json
{
  "error" : "missing Authorization header"
}
```


##### Response 500
```json
{
  "error" : "missing Authorization header"
}
```
___

<a name="users-inital-post"></a>
### Create the initial Mender user
```
POST /users/inital
```


#### Description
Creates the initial Mender user, provided that:
* the users database is empty
* a valid JWT token is presented (scope: 'mender.users.create.initial')


#### Parameters

|Type|Name|Description|Schema|
|---|---|---|---|
|**Header**|**Authorization**  <br>*required*|Contains the JWT token issued upon login.|string (Bearer [token])|
|**Body**|**user**  <br>*required*|New user descriptor.|[User](#user)|


#### Responses

|HTTP Code|Description|Schema|
|---|---|---|
|**201**|Successful response.  <br>**Headers** :   <br>`Location` (string) : URL of the newly created user.|No Content|
|**400**|Bad request, see error message for details.|[Error](#error)|
|**401**|Unauthorized.|[Error](#error)|
|**403**|Forbidden.|[Error](#error)|
|**500**|Internal server error.|[Error](#error)|


#### Produces

* `application/json`


#### Example HTTP request

##### Request body
```json
{
  "email" : "user@acme.com",
  "password" : "mypass1234"
}
```


#### Example HTTP response

##### Response 400
```json
{
  "error" : "missing Authorization header"
}
```


##### Response 401
```json
{
  "error" : "missing Authorization header"
}
```


##### Response 403
```json
{
  "error" : "missing Authorization header"
}
```


##### Response 500
```json
{
  "error" : "missing Authorization header"
}
```




<a name="definitions"></a>
## Definitions

<a name="error"></a>
### Error
Error descriptor.


|Name|Description|Schema|
|---|---|---|
|**error**  <br>*optional*|Description of the error.|string|


<a name="user"></a>
### User
New user descriptor.


|Name|Description|Schema|
|---|---|---|
|**email**  <br>*optional*|A unique email address.|string|
|**password**  <br>*optional*|Password.|string|





